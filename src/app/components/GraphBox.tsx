'use client'
import { useGSAP } from "@gsap/react";
import { useRef } from "react";
import { animateHeight } from "../helper/animation";

export default function GraphBox() {
  const scope = useRef<HTMLDivElement>(null);
  useGSAP(
    () => {
      animateHeight([77, 49, 26], ".bar1");
      animateHeight([48, 75, 48], ".bar2");
      animateHeight([67, 37, 63], ".bar3");
      animateHeight([27, 47, 77], ".bar4");
    },
    { scope: scope }
  );
  return (
    <div
      className=" rounded-3xl absolute top-11 left-1/2 -translate-x-1/2  h-[8rem] flex gap-4 justify-center items-center  "
      ref={scope}
    >
      <div className=" p-[1px] bg-gradient-to-r from-color8 to-color9 inline-block rounded-3xl ">
        <div className="radialGradient2 border-color9 w-[7rem] h-[7rem]  rounded-3xl relative flex gap-2 justify-center items-end p-4">
          <div className="bar1 graphBoxStick shadow-md shadow-black/25"></div>
          <div className="bar2 graphBoxStick shadow-md shadow-black/25"></div>
          <div className="bar3 graphBoxStick shadow-md shadow-black/25"></div>
          <div className="bar4 graphBoxStick shadow-md shadow-black/25"></div>
        </div>
      </div>
      <div>
        <PiChart />
      </div>
    </div>
  );
}

function PiChart() {
  return (
    <svg
      width="103"
      height="102"
      viewBox="0 0 103 102"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M42.8345 9.37974C44.8561 9.1415 46.893 9.67552 48.5376 10.8749C50.1823 12.0743 51.3133 13.8506 51.7043 15.8482L51.8105 16.558L51.8318 17V46.75C51.8319 47.791 52.2141 48.7957 52.9058 49.5736C53.5975 50.3515 54.5507 50.8484 55.5845 50.9702L56.0818 51H84.9818C87.2361 51 89.3981 51.8955 90.9922 53.4896C92.5862 55.0836 93.4818 57.2456 93.4818 59.5C93.4816 59.8233 93.4445 60.1456 93.3713 60.4605C91.6704 67.7988 88.0498 74.5532 82.88 80.032C77.7103 85.5108 71.1773 89.5172 63.95 91.6407C56.7226 93.7643 49.0608 93.9289 41.749 92.1175C34.4372 90.3061 27.7382 86.5839 22.338 81.332C16.9379 76.0802 13.0306 69.4874 11.0163 62.2289C9.00207 54.9704 8.95321 47.3069 10.8747 40.0233C12.7963 32.7396 16.6192 26.0976 21.9519 20.7773C27.2847 15.457 33.9356 11.6497 41.2238 9.74524L42.3713 9.46049L42.8345 9.37974Z"
        fill="black"
      />
      <path
        d="M42.8345 9.37974C44.8561 9.1415 46.893 9.67552 48.5376 10.8749C50.1823 12.0743 51.3133 13.8506 51.7043 15.8482L51.8105 16.558L51.8318 17V46.75C51.8319 47.791 52.2141 48.7957 52.9058 49.5736C53.5975 50.3515 54.5507 50.8484 55.5845 50.9702L56.0818 51H84.9818C87.2361 51 89.3981 51.8955 90.9922 53.4896C92.5862 55.0836 93.4818 57.2456 93.4818 59.5C93.4816 59.8233 93.4445 60.1456 93.3713 60.4605C91.6704 67.7988 88.0498 74.5532 82.88 80.032C77.7103 85.5108 71.1773 89.5172 63.95 91.6407C56.7226 93.7643 49.0608 93.9289 41.749 92.1175C34.4372 90.3061 27.7382 86.5839 22.338 81.332C16.9379 76.0802 13.0306 69.4874 11.0163 62.2289C9.00207 54.9704 8.95321 47.3069 10.8747 40.0233C12.7963 32.7396 16.6192 26.0976 21.9519 20.7773C27.2847 15.457 33.9356 11.6497 41.2238 9.74524L42.3713 9.46049L42.8345 9.37974Z"
        fill="url(#paint0_linear_444_83160)"
      />
      <path
        d="M60.3315 14.8748V38.2498C60.3315 39.377 60.7793 40.458 61.5763 41.255C62.3734 42.0521 63.4544 42.4998 64.5815 42.4998H87.9565C88.6359 42.4996 89.3052 42.3366 89.9085 42.0244C90.5119 41.7122 91.0316 41.26 91.4241 40.7055C91.8166 40.1511 92.0705 39.5107 92.1645 38.8379C92.2585 38.1651 92.1898 37.4796 91.9643 36.8388C89.8535 30.8435 86.4248 25.398 81.9308 20.9032C77.4368 16.4084 71.9918 12.9789 65.9968 10.8671C65.3558 10.6407 64.6698 10.5714 63.9965 10.665C63.3231 10.7586 62.682 11.0123 62.1271 11.4049C61.5721 11.7975 61.1194 12.3176 60.8069 12.9213C60.4945 13.5251 60.3315 14.195 60.3315 14.8748Z"
        fill="black"
      />
      <path
        d="M60.3315 14.8748V38.2498C60.3315 39.377 60.7793 40.458 61.5763 41.255C62.3734 42.0521 63.4544 42.4998 64.5815 42.4998H87.9565C88.6359 42.4996 89.3052 42.3366 89.9085 42.0244C90.5119 41.7122 91.0316 41.26 91.4241 40.7055C91.8166 40.1511 92.0705 39.5107 92.1645 38.8379C92.2585 38.1651 92.1898 37.4796 91.9643 36.8388C89.8535 30.8435 86.4248 25.398 81.9308 20.9032C77.4368 16.4084 71.9918 12.9789 65.9968 10.8671C65.3558 10.6407 64.6698 10.5714 63.9965 10.665C63.3231 10.7586 62.682 11.0123 62.1271 11.4049C61.5721 11.7975 61.1194 12.3176 60.8069 12.9213C60.4945 13.5251 60.3315 14.195 60.3315 14.8748Z"
        fill="url(#paint1_linear_444_83160)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_444_83160"
          x1="51.2625"
          y1="5.5584"
          x2="51.4288"
          y2="97.1308"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#C7D7FF" />
          <stop offset="1" stopColor="#788199" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_444_83160"
          x1="108.627"
          y1="7.53393"
          x2="76.2684"
          y2="42.4998"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#5C73AE" stopOpacity="0" />
          <stop offset="1" stopColor="#5C73AE" />
        </linearGradient>
      </defs>
    </svg>
  );
}
